# ğŸš€ GuÃ­a de Deployment - Susana Shop

## ğŸ“‹ Requisitos Previos

- Kubernetes cluster configurado
- kubectl instalado y configurado
- Git instalado

## ğŸ—ï¸ Estructura del Proyecto
```
PAGINA_WEB_NODO/
â”œâ”€â”€ deploy.sh                    # Script de deployment completo
â”œâ”€â”€ update-database.sh           # Script para actualizar DB
â”œâ”€â”€ DEPLOYMENT.md                # Esta guÃ­a
â”œâ”€â”€ backend/                     # API Node.js/TypeScript
â”œâ”€â”€ frontend/                    # AplicaciÃ³n web
â”‚   â””â”€â”€ k8s/                     # Archivos de Kubernetes
â”‚       â”œâ”€â”€ app/                 # Deployments de aplicaciÃ³n
â”‚       â”œâ”€â”€ base/                # Configuraciones base
â”‚       â””â”€â”€ mysql/               # ConfiguraciÃ³n de MySQL
```

## ğŸš€ Deployment Completo

### OpciÃ³n 1: Usando el script automÃ¡tico (recomendado)
```bash
./deploy.sh
```

### OpciÃ³n 2: Manual
```bash
# 1. Namespace y configuraciones base
kubectl apply -f frontend/k8s/base/

# 2. MySQL
kubectl apply -f frontend/k8s/mysql/

# 3. AplicaciÃ³n
kubectl apply -f frontend/k8s/app/
```

## ğŸ”„ Actualizar Base de Datos
```bash
./update-database.sh
```

## ğŸ“Š Comandos Ãštiles

### Ver estado
```bash
kubectl get pods -n susana-shop
kubectl get all -n susana-shop
```

### Ver logs
```bash
kubectl logs -f deployment/backend -n susana-shop
kubectl logs -f deployment/frontend -n susana-shop
kubectl logs -f deployment/mysql -n susana-shop
```

### Acceder localmente
```bash
kubectl port-forward service/frontend 3000:3000 -n susana-shop
kubectl port-forward service/backend 4000:4000 -n susana-shop
```

## ğŸ‘¤ Usuarios de Prueba

| Email | Password | Rol |
|-------|----------|-----|
| admin@tienda.com | admin123 | admin |
| juan@example.com | admin123 | cliente |
| maria@example.com | admin123 | cliente |
| carlos@example.com | admin123 | cliente |

## ğŸ—‘ï¸ Eliminar Todo
```bash
kubectl delete namespace susana-shop
```

## ğŸ”§ Troubleshooting

### Pod no inicia
```bash
kubectl describe pod <pod-name> -n susana-shop
kubectl logs <pod-name> -n susana-shop
```

### Reiniciar deployment
```bash
kubectl rollout restart deployment/backend -n susana-shop
kubectl rollout restart deployment/frontend -n susana-shop
```
```

## âœ… Resumen de archivos creados:
```
PAGINA_WEB_NODO/
â”œâ”€â”€ deploy.sh                           â† Crear âœ…
â”œâ”€â”€ update-database.sh                  â† Crear âœ…
â”œâ”€â”€ DEPLOYMENT.md                       â† Crear âœ…
â”œâ”€â”€ .gitignore                          â† Ya existe
â””â”€â”€ frontend/
    â””â”€â”€ k8s/
        â”œâ”€â”€ base/
        â”‚   â”œâ”€â”€ secret-app.yaml         â† Ya existe âœ…
        â”‚   â””â”€â”€ secret-mysql.yaml       â† Ya existe âœ…
        â””â”€â”€ mysql/
            â””â”€â”€ configmap-init-sql.yaml â† Ya existe âœ…